@synth supersaw
longname : Trance supersaw
type : synth
author : Guy Brown
version : 1.0
doc : Classic Roland trance supersaw
@end

@param cutoff
type: float
mutable: yes
step: 0.01
min: 0
max: 1
default: 1
doc : Controls the brightness of the sound
@end

@param envelope
type: float
mutable: no
step: 0.01
min: 0
max: 1
default: 0.18
doc : Controls how long it takes the sound to decay
@end

@param resonance
type: float
mutable: yes
step: 0.01
min: 0
max: 1
default: 0.18
doc : Controls the sharpness of the filter usually set low for this sound
@end

@param detune
type: float
mutable: yes
step: 0.001
min: 0
max: 0.03
default: 0
doc : Controls the amount of detuning
@end

# lots of oscillators

SAW-OSC : vco1
SAW-OSC : vco2
SAW-OSC : vco3
SAW-OSC : vco4
SAW-OSC : vco5
SAW-OSC : vco6
SAW-OSC : vco7
VCA : mix
VCA : vca
HPF : hpf
LPF : lpf
SHAPER : shaper
ADSR : env

# connect them

vco1.out -> mix.in
vco2.out -> mix.in
vco3.out -> mix.in
vco4.out -> mix.in
vco5.out -> mix.in
vco6.out -> mix.in
vco7.out -> mix.in
mix.level = 0.2

# introduce a spot of distortion

mix.out -> shaper.in

# high pass linked to pitch

shaper.out -> hpf.in
hpf.out -> lpf.in
lpf.out -> vca.in
vca.out -> audio.in

# all the oscillators track pitch

vco1.pitch = param.pitch*(1-param.detune)
vco2.pitch = param.pitch*(1-0.66*param.detune)
vco3.pitch = param.pitch*(1-0.33*param.detune)
vco4.pitch = param.pitch
vco5.pitch = param.pitch*(1+0.33*param.detune)
vco6.pitch = param.pitch*(1+0.66*param.detune)
vco7.pitch = param.pitch*(1+param.detune)

# high pass tracks pitch

hpf.cutoff = param.pitch
hpf.resonance = 2

# other keyboard controls

lpf.cutoff = map(param.cutoff,100,15000)
lpf.resonance = map(param.resonance,0,20)

# apply the envelope

env.out -> vca.levelCV
env.attack = 0.02
env.decay = 0.1
env.sustain = param.level
env.release = map(param.envelope,0.1,0.8)
env.level = param.level

# we add a small random variation to the detune each time a note is played
# this avoids samey phasing effects

shaper.fuzz = 5

# add a tiny bit of random detune to avoid samey onsets

vco1.detune = random(-1,1)
vco2.detune = random(-1,1)
vco3.detune = random(-1,1)
vco5.detune = random(-1,1)
vco6.detune = random(-1,1)
vco7.detune = random(-1,1)

# end


