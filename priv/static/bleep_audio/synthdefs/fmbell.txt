@synth fmbell
longname : FM Bell
type : synth
author : Guy Brown
version : 1.0
doc : Simple example of FM synthesis to make a bell sound
@end

@param timbre
type: float
mutable: yes
step: 0.01
min: 0
max: 1
default : 0.53
doc : Controls the harmonicity of the bell sound
@end

@param decay
type: float
mutable: no
step: 0.01
min: 0
max: 1
default : 0.28
doc : Controls the decay of the bell sound
@end

@param volume
type: float
mutable: no
step: 0.01
min: 0
max: 1
default : 0.28
doc : Controls the overall volume of the bell sound
@end

# modules

SIN-OSC : carrier
SIN-OSC : modulator
VCA : gain
VCA : vca
ADSR : env

# patch

modulator.out -> gain.in
gain.out -> carrier.pitchCV
carrier.detune = 200
modulator.detune = 500
env.out -> vca.levelCV

carrier.out -> vca.in
vca.out -> audio.in

env.attack = 0
env.decay = map(param.decay,0.1,2)
env.sustain = 0
env.release = 0.2
env.level = param.level*param.volume

gain.level = map(param.timbre,1,500)*map(param.level,0,1)

# tweak

carrier.pitch = param.pitch
modulator.pitch = param.pitch

# end
